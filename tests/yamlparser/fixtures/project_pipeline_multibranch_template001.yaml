- workflow_job_defaults: &workflow_job_defaults
    name: 'workflow_job_defaults'
    project-type: multibranch
    disabled: false
    logrotate:
        daysToKeep: 7
        numToKeep: 5
        artifactDaysToKeep: -1
        artifactNumToKeep: -1
    jdk: '{default-jdk}'

- job-template:
    name: '{name}-{workflowComponentId}-demo-mb'
    description: 'Workflow demo'
    <<: *workflow_job_defaults
    multibranch:
        timer-trigger: "@midnight"
        periodic-folder-interval: 'H H * * *'
        periodic-folder-spec: '86400000'
        prune-dead-branches: 'true'
        number-to-keep: '10'
        days-to-keep: '10'
        scm:
            - git:
                url: 'git@git.flusso.nl:example/example.git'
                credentials-id: '4f0dfb96-a7b1-421c-a4ea-b6a154f91b08'
            - git:
                url: 'git@git.flusso.nl:example/example.git'
                credentials-id: '4f0dfb96-a7b1-421c-a4ea-b6a154f91b08'
                shallow-clone: true
                strategy:
            - git:
                url: 'git@git.flusso.nl:example/example.git'
                credentials-id: '4f0dfb96-a7b1-421c-a4ea-b6a154f91b08'
                strategy:
                    exceptions:
                        - develop
                        - master
        env-properties: |
            semVer=prerelease
            foo=bar


- job-group:
    name: '{name}-workflow'
    jobs:
        - '{name}-{workflowComponentId}-demo-mb':

- project:
    name: example
    jobs:
        - '{name}-workflow':
            workflowComponentId: keep-frontend
